\hypertarget{parserintf_8h_source}{}\doxysection{parserintf.\+h}
\label{parserintf_8h_source}\index{/mnt/c/projects/doxygen/src/parserintf.h@{/mnt/c/projects/doxygen/src/parserintf.h}}
\mbox{\hyperlink{parserintf_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/******************************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ *}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ *}}
\DoxyCodeLine{5 \textcolor{comment}{ * Copyright (C) 1997-\/2015 by Dimitri van Heesch.}}
\DoxyCodeLine{6 \textcolor{comment}{ *}}
\DoxyCodeLine{7 \textcolor{comment}{ * Permission to use, copy, modify, and distribute this software and its}}
\DoxyCodeLine{8 \textcolor{comment}{ * documentation under the terms of the GNU General Public License is hereby}}
\DoxyCodeLine{9 \textcolor{comment}{ * granted. No representations are made about the suitability of this software}}
\DoxyCodeLine{10 \textcolor{comment}{ * for any purpose. It is provided "{}as is"{} without express or implied warranty.}}
\DoxyCodeLine{11 \textcolor{comment}{ * See the GNU General Public License for more details.}}
\DoxyCodeLine{12 \textcolor{comment}{ *}}
\DoxyCodeLine{13 \textcolor{comment}{ * Documents produced by Doxygen are derivative works derived from the}}
\DoxyCodeLine{14 \textcolor{comment}{ * input used in their production; they are not affected by this license.}}
\DoxyCodeLine{15 \textcolor{comment}{ *}}
\DoxyCodeLine{16 \textcolor{comment}{ */}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#ifndef PARSERINTF\_H}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define PARSERINTF\_H}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{types_8h}{types.h}}"{}}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{containers_8h}{containers.h}}"{}}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keyword}{class }\mbox{\hyperlink{classEntry}{Entry}};}
\DoxyCodeLine{30 \textcolor{keyword}{class }\mbox{\hyperlink{classFileDef}{FileDef}};}
\DoxyCodeLine{31 \textcolor{keyword}{class }\mbox{\hyperlink{classCodeOutputInterface}{CodeOutputInterface}};}
\DoxyCodeLine{32 \textcolor{keyword}{class }\mbox{\hyperlink{classMemberDef}{MemberDef}};}
\DoxyCodeLine{33 \textcolor{keyword}{class }\mbox{\hyperlink{classDefinition}{Definition}};}
\DoxyCodeLine{34 \textcolor{keyword}{class }\mbox{\hyperlink{classClangTUParser}{ClangTUParser}};}
\DoxyCodeLine{35 }
\DoxyCodeLine{42 \textcolor{keyword}{class }\mbox{\hyperlink{classOutlineParserInterface}{OutlineParserInterface}}}
\DoxyCodeLine{43 \{}
\DoxyCodeLine{44   \textcolor{keyword}{public}:}
\DoxyCodeLine{45     \textcolor{keyword}{virtual} \mbox{\hyperlink{classOutlineParserInterface_ab512faefb6cb0aabd1edf46846db5319}{\string~OutlineParserInterface}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{46 }
\DoxyCodeLine{55     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classOutlineParserInterface_a40c002cf93d56d617f3ca92ff9b0a210}{parseInput}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&fileName,}
\DoxyCodeLine{56                             \textcolor{keyword}{const} \textcolor{keywordtype}{char} *fileBuf,}
\DoxyCodeLine{57                             \textcolor{keyword}{const} std::shared\_ptr<Entry> \&root,}
\DoxyCodeLine{58                             \mbox{\hyperlink{classClangTUParser}{ClangTUParser}} *clangParser) = 0;}
\DoxyCodeLine{59 }
\DoxyCodeLine{65     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classOutlineParserInterface_a0df8efc6ad67956cf54b7dec68c932b4}{needsPreprocessing}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{66 }
\DoxyCodeLine{73     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classOutlineParserInterface_a69a5b6af5318cae09594b6a48d6b0d99}{parsePrototype}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&text) = 0;}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \};}
\DoxyCodeLine{76 }
\DoxyCodeLine{83 \textcolor{keyword}{class }\mbox{\hyperlink{classCodeParserInterface}{CodeParserInterface}}}
\DoxyCodeLine{84 \{}
\DoxyCodeLine{85   \textcolor{keyword}{public}:}
\DoxyCodeLine{86     \textcolor{keyword}{virtual} \mbox{\hyperlink{classCodeParserInterface_a9cb510c4b71f1ee6cc5d7b69f37f32da}{\string~CodeParserInterface}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{87 }
\DoxyCodeLine{110     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classCodeParserInterface_a33d72178196c84965d5bf1eb361af8bb}{parseCode}}(\mbox{\hyperlink{classCodeOutputInterface}{CodeOutputInterface}} \&codeOutIntf,}
\DoxyCodeLine{111                            \textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&scopeName,}
\DoxyCodeLine{112                            \textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&input,}
\DoxyCodeLine{113                            \mbox{\hyperlink{types_8h_a9974623ce72fc23df5d64426b9178bf2}{SrcLangExt}} lang,}
\DoxyCodeLine{114                            \textcolor{keywordtype}{bool} isExampleBlock,}
\DoxyCodeLine{115                            \textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&exampleName=\mbox{\hyperlink{classQCString}{QCString}}(),}
\DoxyCodeLine{116                            \textcolor{keyword}{const} \mbox{\hyperlink{classFileDef}{FileDef}} *fileDef=0,}
\DoxyCodeLine{117                            \textcolor{keywordtype}{int} startLine=-\/1,}
\DoxyCodeLine{118                            \textcolor{keywordtype}{int} endLine=-\/1,}
\DoxyCodeLine{119                            \textcolor{keywordtype}{bool} inlineFragment=\mbox{\hyperlink{qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}},}
\DoxyCodeLine{120                            \textcolor{keyword}{const} \mbox{\hyperlink{classMemberDef}{MemberDef}} *memberDef=0,}
\DoxyCodeLine{121                            \textcolor{keywordtype}{bool} showLineNumbers=\mbox{\hyperlink{qcstring_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}},}
\DoxyCodeLine{122                            \textcolor{keyword}{const} \mbox{\hyperlink{classDefinition}{Definition}} *searchCtx=0,}
\DoxyCodeLine{123                            \textcolor{keywordtype}{bool} collectXRefs=\mbox{\hyperlink{qcstring_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}}}
\DoxyCodeLine{124                           ) = 0;}
\DoxyCodeLine{125 }
\DoxyCodeLine{131     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classCodeParserInterface_a3730d6a2825e4e377d7f7fb048f45367}{resetCodeParserState}}() = 0;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \};}
\DoxyCodeLine{134 }
\DoxyCodeLine{135 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 \textcolor{keyword}{using} \mbox{\hyperlink{parserintf_8h_afda01ba4e899f06f0fbbd2b0f79fd5cf}{OutlineParserFactory}} = std::function<std::unique\_ptr<OutlineParserInterface>()>;}
\DoxyCodeLine{138 \textcolor{keyword}{using} \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}}    = std::function<std::unique\_ptr<CodeParserInterface>()>;}
\DoxyCodeLine{139 }
\DoxyCodeLine{145 \textcolor{keyword}{class }\mbox{\hyperlink{classParserManager}{ParserManager}}}
\DoxyCodeLine{146 \{}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     \textcolor{keyword}{struct }ParserPair}
\DoxyCodeLine{149     \{}
\DoxyCodeLine{150       ParserPair(\mbox{\hyperlink{parserintf_8h_afda01ba4e899f06f0fbbd2b0f79fd5cf}{OutlineParserFactory}} opf, \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}} cpf, \textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&pn)}
\DoxyCodeLine{151         : outlineParserFactory(opf), codeParserFactory(cpf), parserName(pn)}
\DoxyCodeLine{152       \{}
\DoxyCodeLine{153       \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155       \mbox{\hyperlink{parserintf_8h_afda01ba4e899f06f0fbbd2b0f79fd5cf}{OutlineParserFactory}} outlineParserFactory;}
\DoxyCodeLine{156       \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}}    codeParserFactory;}
\DoxyCodeLine{157       \mbox{\hyperlink{classQCString}{QCString}} parserName;}
\DoxyCodeLine{158     \};}
\DoxyCodeLine{159 }
\DoxyCodeLine{160   \textcolor{keyword}{public}:}
\DoxyCodeLine{165     \mbox{\hyperlink{classParserManager_a4716da035dc5a2d86712c473789235b9}{ParserManager}}(\mbox{\hyperlink{parserintf_8h_afda01ba4e899f06f0fbbd2b0f79fd5cf}{OutlineParserFactory}} outlineParserFactory,}
\DoxyCodeLine{166                   \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}}    codeParserFactory)}
\DoxyCodeLine{167       : m\_defaultParsers(outlineParserFactory,codeParserFactory, \mbox{\hyperlink{classQCString}{QCString}}())}
\DoxyCodeLine{168     \{}
\DoxyCodeLine{169     \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{179     \textcolor{keywordtype}{void} \mbox{\hyperlink{classParserManager_ae3fd2274adef4a45c05ee1c56ffedd5b}{registerParser}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&name,\mbox{\hyperlink{parserintf_8h_afda01ba4e899f06f0fbbd2b0f79fd5cf}{OutlineParserFactory}} outlineParserFactory,}
\DoxyCodeLine{180                                          \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}}    codeParserFactory)}
\DoxyCodeLine{181     \{}
\DoxyCodeLine{182       m\_parsers.emplace(name.\mbox{\hyperlink{classQCString_a9824b07232eea418ab3b3e7dc3178eec}{str}}(),ParserPair(outlineParserFactory,codeParserFactory,name));}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{188     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classParserManager_a150d4d51073cb46cdf38a236cc120d0a}{registerExtension}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension, \textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&parserName)}
\DoxyCodeLine{189     \{}
\DoxyCodeLine{190       \textcolor{keywordflow}{if} (parserName.\mbox{\hyperlink{classQCString_a621c4090d69ad7d05ef8e5234376c3d8}{isEmpty}}() || extension.\mbox{\hyperlink{classQCString_a621c4090d69ad7d05ef8e5234376c3d8}{isEmpty}}()) \textcolor{keywordflow}{return} \mbox{\hyperlink{qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{191 }
\DoxyCodeLine{192       \textcolor{keyword}{const} \textcolor{keyword}{auto} \&parserIt = m\_parsers.find(parserName.\mbox{\hyperlink{classQCString_a9824b07232eea418ab3b3e7dc3178eec}{str}}());}
\DoxyCodeLine{193       \textcolor{keywordflow}{if} (parserIt == m\_parsers.end()) \textcolor{keywordflow}{return} \mbox{\hyperlink{qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{194 }
\DoxyCodeLine{195       \textcolor{keyword}{auto} extensionIt = m\_extensions.find(extension.\mbox{\hyperlink{classQCString_a9824b07232eea418ab3b3e7dc3178eec}{str}}());}
\DoxyCodeLine{196       \textcolor{keywordflow}{if} (extensionIt != m\_extensions.end()) \textcolor{comment}{// extension already exists}}
\DoxyCodeLine{197       \{}
\DoxyCodeLine{198         m\_extensions.erase(extensionIt); \textcolor{comment}{// remove it (e.g. user specified extension overrules built in one)}}
\DoxyCodeLine{199       \}}
\DoxyCodeLine{200       m\_extensions.emplace(extension.\mbox{\hyperlink{classQCString_a9824b07232eea418ab3b3e7dc3178eec}{str}}(),parserIt-\/>second); \textcolor{comment}{// add new mapping}}
\DoxyCodeLine{201       \textcolor{keywordflow}{return} \mbox{\hyperlink{qcstring_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{202     \}}
\DoxyCodeLine{203 }
\DoxyCodeLine{208     std::unique\_ptr<OutlineParserInterface> \mbox{\hyperlink{classParserManager_a44739ad6424de118f9cb2ccae8ea68b9}{getOutlineParser}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension)}
\DoxyCodeLine{209     \{}
\DoxyCodeLine{210       \textcolor{keywordflow}{return} getParsers(extension).outlineParserFactory();}
\DoxyCodeLine{211     \}}
\DoxyCodeLine{212 }
\DoxyCodeLine{217     std::unique\_ptr<CodeParserInterface> \mbox{\hyperlink{classParserManager_a691952e0c5c944e83d4a6e88117471a6}{getCodeParser}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension)}
\DoxyCodeLine{218     \{}
\DoxyCodeLine{219       \textcolor{keyword}{auto} factory = \mbox{\hyperlink{classParserManager_a8f767ea4b80602eec90e5fa4a5c2b008}{getCodeParserFactory}}(extension);}
\DoxyCodeLine{220       \textcolor{keywordflow}{return} factory();}
\DoxyCodeLine{221     \}}
\DoxyCodeLine{222 }
\DoxyCodeLine{224     \mbox{\hyperlink{parserintf_8h_ab3d33d80825a6d236fc1ca772325c12e}{CodeParserFactory}} \&\mbox{\hyperlink{classParserManager_a8f767ea4b80602eec90e5fa4a5c2b008}{getCodeParserFactory}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension)}
\DoxyCodeLine{225     \{}
\DoxyCodeLine{226       \textcolor{keywordflow}{return} getParsers(extension).codeParserFactory;}
\DoxyCodeLine{227     \}}
\DoxyCodeLine{228 }
\DoxyCodeLine{233     \mbox{\hyperlink{classQCString}{QCString}} \mbox{\hyperlink{classParserManager_af629ad3cc57868b383cb02601fd9c7b4}{getParserName}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension)}
\DoxyCodeLine{234     \{}
\DoxyCodeLine{235       \textcolor{keywordflow}{return} getParsers(extension).parserName;}
\DoxyCodeLine{236     \}}
\DoxyCodeLine{237 }
\DoxyCodeLine{238   \textcolor{keyword}{private}:}
\DoxyCodeLine{239     ParserPair \&getParsers(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&extension)}
\DoxyCodeLine{240     \{}
\DoxyCodeLine{241       \mbox{\hyperlink{classQCString}{QCString}} ext = extension.\mbox{\hyperlink{classQCString_a33688239622e659cfb469fbd62c9cccb}{lower}}();}
\DoxyCodeLine{242       \textcolor{keywordflow}{if} (ext.\mbox{\hyperlink{classQCString_a621c4090d69ad7d05ef8e5234376c3d8}{isEmpty}}()) ext=\textcolor{stringliteral}{"{}.no\_extension"{}};}
\DoxyCodeLine{243       \textcolor{keyword}{auto} it = m\_extensions.find(ext.\mbox{\hyperlink{classQCString_ac3aa3ac1a1c36d3305eba22a2eb0d098}{data}}());}
\DoxyCodeLine{244       \textcolor{keywordflow}{if} (it==m\_extensions.end() \&\& ext.\mbox{\hyperlink{classQCString_ac52596733e9110b778019946d73fb268}{length}}()>4)}
\DoxyCodeLine{245       \{}
\DoxyCodeLine{246         it = m\_extensions.find(ext.\mbox{\hyperlink{classQCString_aecf8b66312c4e97333219cc344c11a4f}{left}}(4).\mbox{\hyperlink{classQCString_ac3aa3ac1a1c36d3305eba22a2eb0d098}{data}}());}
\DoxyCodeLine{247       \}}
\DoxyCodeLine{248       \textcolor{keywordflow}{return} it!=m\_extensions.end() ? it-\/>second : m\_defaultParsers;}
\DoxyCodeLine{249     \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251     std::map<std::string,ParserPair> m\_parsers;}
\DoxyCodeLine{252     std::map<std::string,ParserPair \&> m\_extensions;}
\DoxyCodeLine{253     ParserPair m\_defaultParsers;}
\DoxyCodeLine{254 \};}
\DoxyCodeLine{255 }
\DoxyCodeLine{256 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
