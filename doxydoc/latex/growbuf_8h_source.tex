\hypertarget{growbuf_8h_source}{}\doxysection{growbuf.\+h}
\label{growbuf_8h_source}\index{/mnt/c/projects/doxygen/src/growbuf.h@{/mnt/c/projects/doxygen/src/growbuf.h}}
\mbox{\hyperlink{growbuf_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef GROWBUF\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define GROWBUF\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define GROW\_AMOUNT 1024*4}}
\DoxyCodeLine{10 }
\DoxyCodeLine{12 \textcolor{keyword}{class }\mbox{\hyperlink{classGrowBuf}{GrowBuf}}}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14   \textcolor{keyword}{public}:}
\DoxyCodeLine{15     \mbox{\hyperlink{classGrowBuf_a7868767b69ab7f10f3a36da73e2f5e5f}{GrowBuf}}() : m\_str(0), m\_pos(0), m\_len(0) \{\}}
\DoxyCodeLine{16     \mbox{\hyperlink{classGrowBuf_af49b662ca5d8163601b91ad7f201e460}{GrowBuf}}(\textcolor{keywordtype}{size\_t} initialSize) : m\_pos(0), m\_len(initialSize) \{ m\_str=\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(malloc(m\_len)); \}}
\DoxyCodeLine{17    \mbox{\hyperlink{classGrowBuf_af7206ac4d12d20889037d545e6bab0d9}{\string~GrowBuf}}()         \{ free(m\_str); \}}
\DoxyCodeLine{18     \mbox{\hyperlink{classGrowBuf_ab7adf8adf049747895150afb7c539d71}{GrowBuf}}(\textcolor{keyword}{const} \mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&other)}
\DoxyCodeLine{19     \{}
\DoxyCodeLine{20       m\_len = other.m\_len;}
\DoxyCodeLine{21       m\_pos = other.m\_pos;}
\DoxyCodeLine{22       m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(malloc(m\_len));}
\DoxyCodeLine{23       memcpy(m\_str,other.m\_str,m\_len);}
\DoxyCodeLine{24     \}}
\DoxyCodeLine{25     \mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&\mbox{\hyperlink{classGrowBuf_a30ef5583d31934cffabff4fa837a9e84}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&other)}
\DoxyCodeLine{26     \{}
\DoxyCodeLine{27       \textcolor{keywordflow}{if} (\textcolor{keyword}{this}!=\&other)}
\DoxyCodeLine{28       \{}
\DoxyCodeLine{29         free(m\_str);}
\DoxyCodeLine{30         m\_len = other.m\_len;}
\DoxyCodeLine{31         m\_pos = other.m\_pos;}
\DoxyCodeLine{32         m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(malloc(m\_len));}
\DoxyCodeLine{33         memcpy(m\_str,other.m\_str,m\_len);}
\DoxyCodeLine{34       \}}
\DoxyCodeLine{35       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{36     \}}
\DoxyCodeLine{37     \mbox{\hyperlink{classGrowBuf_a471132290014798c89965dd36b51e5bc}{GrowBuf}}(\mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&\&other)}
\DoxyCodeLine{38       : m\_str(std::exchange(other.m\_str,static\_cast<char*>(0)))}
\DoxyCodeLine{39       , m\_pos(std::exchange(other.m\_pos,0))}
\DoxyCodeLine{40       , m\_len(std::exchange(other.m\_len,0))}
\DoxyCodeLine{41     \{}
\DoxyCodeLine{42     \}}
\DoxyCodeLine{43     \mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&\mbox{\hyperlink{classGrowBuf_ac7ef149390d72537bf9f2a1be9cc3baf}{operator=}}(\mbox{\hyperlink{classGrowBuf}{GrowBuf}} \&\&other)}
\DoxyCodeLine{44     \{}
\DoxyCodeLine{45       \textcolor{keywordflow}{if} (\textcolor{keyword}{this}==\&other)}
\DoxyCodeLine{46         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{47       m\_len = std::exchange(other.m\_len,0);}
\DoxyCodeLine{48       m\_pos = std::exchange(other.m\_pos,0);}
\DoxyCodeLine{49       m\_str = std::exchange(other.m\_str,\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(0));}
\DoxyCodeLine{50       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_a9a3aabf69cefb88ffc5bb7b88f86b933}{reserve}}(\textcolor{keywordtype}{size\_t} size) \{ \textcolor{keywordflow}{if} (m\_len<size) \{ m\_len = size; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \} \}}
\DoxyCodeLine{53     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_a7aadcbc3d02fe6e01acf45d892cff0ba}{clear}}()      \{ m\_pos=0; \}}
\DoxyCodeLine{54     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_a46b4677f555d2abc718f26e71a59efda}{addChar}}(\textcolor{keywordtype}{char} c)  \{ \textcolor{keywordflow}{if} (m\_pos>=m\_len) \{ m\_len+=\mbox{\hyperlink{growbuf_8h_a8b0dc2f8685a41830347ff1e73629fb3}{GROW\_AMOUNT}}; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \}}
\DoxyCodeLine{55                         m\_str[m\_pos++]=c;}
\DoxyCodeLine{56                       \}}
\DoxyCodeLine{57     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_a5e0ff6d9f7a7139725d77a9d669340f3}{addStr}}(\textcolor{keyword}{const} \mbox{\hyperlink{classQCString}{QCString}} \&\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}) \{}
\DoxyCodeLine{58                         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.isEmpty())}
\DoxyCodeLine{59                         \{}
\DoxyCodeLine{60                           \textcolor{keywordtype}{size\_t} l=\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.length();}
\DoxyCodeLine{61                           \textcolor{keywordflow}{if} (m\_pos+l>=m\_len) \{ m\_len+=l+\mbox{\hyperlink{growbuf_8h_a8b0dc2f8685a41830347ff1e73629fb3}{GROW\_AMOUNT}}; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \}}
\DoxyCodeLine{62                           strcpy(\&m\_str[m\_pos],\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.data());}
\DoxyCodeLine{63                           m\_pos+=l;}
\DoxyCodeLine{64                         \}}
\DoxyCodeLine{65                       \}}
\DoxyCodeLine{66     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_afb4b38e6520d3bf3a77a38e17ce669da}{addStr}}(\textcolor{keyword}{const} std::string \&\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}) \{}
\DoxyCodeLine{67                         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.empty())}
\DoxyCodeLine{68                         \{}
\DoxyCodeLine{69                           \textcolor{keywordtype}{size\_t} l=\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.length();}
\DoxyCodeLine{70                           \textcolor{keywordflow}{if} (m\_pos+l>=m\_len) \{ m\_len+=l+\mbox{\hyperlink{growbuf_8h_a8b0dc2f8685a41830347ff1e73629fb3}{GROW\_AMOUNT}}; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \}}
\DoxyCodeLine{71                           strcpy(\&m\_str[m\_pos],\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}.c\_str());}
\DoxyCodeLine{72                           m\_pos+=l;}
\DoxyCodeLine{73                         \}}
\DoxyCodeLine{74                       \}}
\DoxyCodeLine{75     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_ac2a971c747abdd4cb7cb038a3e27197b}{addStr}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}}) \{}
\DoxyCodeLine{76                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}})}
\DoxyCodeLine{77                         \{}
\DoxyCodeLine{78                           \textcolor{keywordtype}{size\_t} l=strlen(\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}});}
\DoxyCodeLine{79                           \textcolor{keywordflow}{if} (m\_pos+l>=m\_len) \{ m\_len+=l+\mbox{\hyperlink{growbuf_8h_a8b0dc2f8685a41830347ff1e73629fb3}{GROW\_AMOUNT}}; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \}}
\DoxyCodeLine{80                           strcpy(\&m\_str[m\_pos],\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}});}
\DoxyCodeLine{81                           m\_pos+=l;}
\DoxyCodeLine{82                         \}}
\DoxyCodeLine{83                       \}}
\DoxyCodeLine{84     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_adba54aa237c8f30b40a9f7fe28226f58}{addStr}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}},\textcolor{keywordtype}{size\_t} n) \{}
\DoxyCodeLine{85                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}})}
\DoxyCodeLine{86                         \{}
\DoxyCodeLine{87                           \textcolor{keywordtype}{size\_t} l=strlen(\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}});}
\DoxyCodeLine{88                           \textcolor{keywordflow}{if} (n<l) l=n;}
\DoxyCodeLine{89                           \textcolor{keywordflow}{if} (m\_pos+l>=m\_len) \{ m\_len+=l+\mbox{\hyperlink{growbuf_8h_a8b0dc2f8685a41830347ff1e73629fb3}{GROW\_AMOUNT}}; m\_str = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(realloc(m\_str,m\_len)); \}}
\DoxyCodeLine{90                           strncpy(\&m\_str[m\_pos],\mbox{\hyperlink{namespacecaseconvert_a2d40a560e370c1b43ad3f58ac4dfa416}{s}},n);}
\DoxyCodeLine{91                           m\_pos+=l;}
\DoxyCodeLine{92                         \}}
\DoxyCodeLine{93                       \}}
\DoxyCodeLine{94     \textcolor{keywordtype}{char} *\mbox{\hyperlink{classGrowBuf_a88d6408723b8c1a58187f24da81dfd5e}{get}}() \{ \textcolor{keywordflow}{return} m\_str; \}}
\DoxyCodeLine{95     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classGrowBuf_a8291335fec63f39c9a021f40dcc15e93}{get}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_str; \}}
\DoxyCodeLine{96     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classGrowBuf_a1a0ecc7a79837ed02005befe12d49994}{getPos}}()\textcolor{keyword}{ const   }\{ \textcolor{keywordflow}{return} m\_pos; \}}
\DoxyCodeLine{97     \textcolor{keywordtype}{void} \mbox{\hyperlink{classGrowBuf_a98f7e0590791e42fcbd31bdfd8c75d2a}{setPos}}(\textcolor{keywordtype}{size\_t} newPos) \{ m\_pos = newPos; \}}
\DoxyCodeLine{98     \textcolor{keywordtype}{char} \mbox{\hyperlink{classGrowBuf_a0b374b413fef36107db3131180486a90}{at}}(\textcolor{keywordtype}{size\_t} i)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_str[i]; \}}
\DoxyCodeLine{99     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classGrowBuf_aa3d16113cdc8835afa7f836914db2289}{empty}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_pos==0; \}}
\DoxyCodeLine{100   \textcolor{keyword}{private}:}
\DoxyCodeLine{101     \textcolor{keywordtype}{char} *m\_str;}
\DoxyCodeLine{102     \textcolor{keywordtype}{size\_t} m\_pos;}
\DoxyCodeLine{103     \textcolor{keywordtype}{size\_t} m\_len;}
\DoxyCodeLine{104 \};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
